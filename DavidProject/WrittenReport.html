<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="David Zeng">

<title>Determinants of Housing Quality: Uncovering the Substantial Impact of Dwelling Type, Zoning Classification, and Lot Area on Overall Home Quality in Ames, Iowa</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="WrittenReport_files/libs/clipboard/clipboard.min.js"></script>
<script src="WrittenReport_files/libs/quarto-html/quarto.js"></script>
<script src="WrittenReport_files/libs/quarto-html/popper.min.js"></script>
<script src="WrittenReport_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="WrittenReport_files/libs/quarto-html/anchor.min.js"></script>
<link href="WrittenReport_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="WrittenReport_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="WrittenReport_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="WrittenReport_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="WrittenReport_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Determinants of Housing Quality: Uncovering the Substantial Impact of Dwelling Type, Zoning Classification, and Lot Area on Overall Home Quality in Ames, Iowa</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>David Zeng </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="abstract" class="level2">
<h2 class="anchored" data-anchor-id="abstract">Abstract</h2>
<p>The research question I planned to tackle was “What role do certain housing characteristics, specifically the type of dwelling, lot area, and zone classification, play in influencing the overall quality rating of a property?” The overall quality of homes significantly influences both market value and buyer satisfaction, making it a crucial factor in real estate analysis and housing market valuation. This analysis investigates the impact of three key variables—Dwelling Type, Zoning Classification, and Lot Area—on the overall quality of homes in Ames, Iowa. The hypothesis was that each of these factors would significantly affect overall home quality. Using a housing dataset from Kaggle with over 2,900 combined observations from Ames, Iowa, I selected the required variables to answer this question: MSSubClass, MSZoning, LotArea, and OverallQual, cleaned them into tidy format, and renamed them for ease of understanding: DwellType, ZoneClass, LotArea, and OverallQual. 3 separate ANOVA tests were performed to assess the significance of each variable’s effect on overall home quality based on each category within their respective variables. The findings revealed that all three variables were statistically significant in affecting the overall quality of homes. More specific conclusions can be drawn from each individual variable’s data analysis plot. These findings may prove useful for prospective home buyers, real estate professionals, and investors by providing insights that can lead to more informed decision-making in property valuation and investment. Understanding these factors allows for more accurate assessments of home quality, ultimately benefiting buyers, sellers, and investors alike.</p>
</section>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>The quality rating of a house is a critical determinant of both market value and buyer satisfaction, making it a central focus for various stakeholders in the real estate market. In the United States, home quality directly influences a property’s long-term value, which is reflected in the fact that nearly 90% of homebuyers consider property condition a crucial factor in their purchasing decisions (National Association of Realtors, 2023) meaning that it is essential to understand what drives housing quality ratings. This study focuses on three key variables: Dwelling Type, Zoning Classification, and Lot Area and explores how each of these factors influences the overall quality of homes in Ames, Iowa. The dataset, comprising over 2,900 individual properties, allows us to test the hypothesis that all three variables significantly affect home quality. This research aims to provide actionable insights for real estate professionals and investors, enhancing the accuracy of property valuations and investment strategies.</p>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<p>Figures 1-3 visualize the relationship between each of the explanatory variables (DwellType, ZoneClass, LotArea) and the overall quality rating (OverallQual) broken down by each of the categories within the explanatory variables. To confirm the relationships visualized in the plot between the explanatory variables and the overall quality, ANOVA tests were used as they were the most efficient method of testing for differences in correlation of the overall quality rating broken down by each level of these multi-categorical explanatory variables.</p>
<p>Figure 1 reveals that each of the categories of dwelling type all have distinctly different divisions within the proportion of each rating they got. For example, most of the 1-story houses abbreviated using the letters A through E have a dominant proportion of mediocre ratings of 5-7, but for the 2-story houses F through H, there is a noticeable spike in the number of higher ratings 8-10.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot%202024-08-15%20215013.png" class="img-fluid figure-img" width="282"></p>
<figcaption>Figure 1 Key</figcaption>
</figure>
</div>
<p><strong>Figure 1</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot%202024-08-16%20163439.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="448"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ANOVA%20DwellType.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="495"></p>
</figure>
</div>
<p>For this relationship, a p-value of less than 2*10^-16 means that as the type of dwelling of a house changes, so does the overall quality rating.</p>
<p>Figure 2 compares overall quality to zone class. Similar to that of Figure 1, it contains a low consistency for the spread of ratings based on it explanatory variable. The ranges are especially different between residential high and low density areas, the number of outliers and where they are vary dramatically, and the quartiles and medians are mostly skewed one way or the other.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot%202024-08-15%20221909.png" class="img-fluid figure-img" width="233"></p>
<figcaption>Figure 2 Key</figcaption>
</figure>
</div>
<p><strong>Figure 2</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot%202024-08-16%20163508.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="436"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ANOVA%20ZoneClass.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="497"></p>
</figure>
</div>
<p>For this ANOVA test, a p-value of less than 2*10^-16 again means that as the type of zone class for a house changes, the overall quality rating will change dramatically as well.</p>
<p>Figure 3 compares overall quality to lot area. This variable has the most obvious trend out of all of the explanatory variables being tested. As lot area increases, the prevalence of mediocre ratings 5-7 dips around 6,000 square feet with an increase in lower ratings 3-4. After this, the prevalence of mediocre ratings begin rising again until about 17,000 square feet in which the higher ratings 8-10 begin to become more prominent. After this point, there is no discernible pattern and lot area becomes meaningless to the quality ratings it gets.</p>
<p><strong>Figure 3</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Screenshot%202024-08-16%20163531.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="461"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ANOVA%20LotArea.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="471"></p>
</figure>
</div>
<p>For this ANOVA test, a p-value of 6.38*10-14 means that lot area does have a bearing on the overall quality ratings of a house until a certain square footage.</p>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>The results of these visualizations and these hypotheses tests do support my hypothesis that each of these explanatory variables (DwellType, ZoneClass, LotArea) significantly affect the overall quality rating (OverallQual) of a house in Ames, Iowa. Those who may benefit from a better determination of overall quality rating may do their jobs more accurately since these metrics prove fairly consistent and reliable.</p>
<ul>
<li><p>Homebuyers: Identification of which dwelling types or zoning classifications are associated with higher quality homes and focusing their search on these categories.</p></li>
<li><p>Real Estate Agents: Better advising of clients on which types of properties or neighborhoods typically have higher quality homes.</p></li>
<li><p>Investors: Target investments in areas or types of properties that are likely to yield higher returns due to better quality.</p></li>
<li><p>Property Appraisals: Making more accurate appraisals by considering the dwelling type, zone class, and lot area as key factors influencing the overall quality.</p></li>
<li><p>Mortgage Lending: More effective assessment of risk by understanding the quality factors associated with different property types and zones.</p></li>
</ul>
<p>This suggests that critical housing market functions, such as mortgage lending and home buying, could become significantly more efficient and less risky for all parties involved. As a result, these processes may be transformed from complex and convoluted to streamline and user-centric, ultimately benefiting all parties involved.</p>
<p>Obviously, further research and testing is required before the public is able to utilize the results of these tests to aid in their daily lives as they are not yet specific and extensive enough to glean insights into the complex housing market. My next steps will be to tackle the limitations of my research and answer more specific sub-questions in order to hone the accuracy and repeatability of my results to be applicable for all housing in the US.</p>
<p>Limitations:</p>
<ul>
<li><p>These specific results can only be applied to that of Ames, Iowa since it was where the housing dataset was taken from.</p></li>
<li><p>There are many other types of dwellings and zone classes as well as houses with larger lot areas that are not included in the dataset, so the results would not provide much insight into those housing types.</p></li>
<li><p>Further testing is required to determine the specifics of the conclusions. Ex: To which degree does the overall quality rating change as the lot area increases?</p></li>
<li><p>There are other housing variables that affect the overall quality rating, so the changes observed in the rating are affected by confounding variables and are not entirely due to the 3 selected explanatory variables.</p></li>
</ul>
</section>
<section id="code-data-sources" class="level2">
<h2 class="anchored" data-anchor-id="code-data-sources">Code &amp; Data Sources</h2>
<p>The housing dataset used in this research can be found <a href="https://www.kaggle.com/competitions/house-prices-advanced-regression-techniques/data" title="Kaggle House Prices - Advanced Regression Techniques">here</a>.</p>
<p>The GitHub repository with the code used in this research can be found <a href="https://github.com/the-codingschool/DSRP-2024-Chenkai" title="The Coding School - Chenkai's Repository">here</a> (Inside the DavidProject folder).</p>
</section>
<section id="references-acknowledgements" class="level2">
<h2 class="anchored" data-anchor-id="references-acknowledgements">References &amp; Acknowledgements</h2>
<p>Homebuyer Purchasing Statistic:</p>
<p>National Association of Realtors. (2023). <em>Home Buyer and Seller Generational Trends Report 2023</em>. nar.realtor/research-and-statistics/research-reports/home-buyer-and-seller-generational-trends</p>
<p>I would like to acknowledge the following people for their contributions to this paper:</p>
<ul>
<li><p>Chenkai Hu for serving as mentor and aiding the development of my exploratory data analysis plots.</p></li>
<li><p>Shruti for acting as TA and leading the team during check-ins for the entirety of the research project.</p></li>
<li><p>The Coding School for this opportunity to apply my data science skills to a real world dataset and for spearheading the Data Science Research Program 2024.</p></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>